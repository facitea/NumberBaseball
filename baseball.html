<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>숫자야구게임</title>
    <style>
        .box{
            width: 15px
        }
        .table, .table th, .table td{
            border: 1px solid black;
            border-collapse: collapse; /*테두리 두 겹을 없애줌*/
        }
        wrapper {
            display: flex;
        }
        .inputside{
            width: 300px;
        }
        .outputside{
            width: 300px;
        }
        .counttitle{
            width: 150px;
        }
        .inputtitle{
            width: 80px;
        }
        p{
            margin: 0;
        }
    </style>
</head>
<body>
    <h1>숫자야구게임</h1>
    <wrapper>  
        <div class="inputside">
            <p>번호를 입력하세요</p>
            <div>
                <input type="text" class="inputnumber box" id="box1">
                <input type="text" class="inputnumber box" id="box2">
                <input type="text" class="inputnumber box" id="box3">
                <input type="text" class="inputnumber box" id="box4"> 
                <!--선택자는 띄어쓰면 두 개 지어줄 수 있다-->
                <input type="button" class="inputnumber" value="투구" onclick="pitch()">
                <input type="button" value="재시작">
            </div>
                <div class="gameresult">투구하세요</div>
        </div>

        <div class="outputside">
            <table class="table">
                <tr>
                    <th>&nbsp;</th>
                    <th class="inputtitle">입력값</th>
                    <th class="counttitle">카운트</th>
                </tr>
                <tr><td> 1회 </td><td>&nbsp;</td><td>&nbsp;</td></tr>
                <tr><td> 2회 </td><td>&nbsp;</td><td>&nbsp;</td></tr>
                <tr><td> 3회 </td><td>&nbsp;</td><td>&nbsp;</td></tr>
                <tr><td> 4회 </td><td>&nbsp;</td><td>&nbsp;</td></tr>
                <tr><td> 5회 </td><td>&nbsp;</td><td>&nbsp;</td></tr>
                <tr><td> 6회 </td><td>&nbsp;</td><td>&nbsp;</td></tr>
                <tr><td> 7회 </td><td>&nbsp;</td><td>&nbsp;</td></tr>
                <tr><td> 8회 </td><td>&nbsp;</td><td>&nbsp;</td></tr>
                <tr><td> 9회 </td><td>&nbsp;</td><td>&nbsp;</td></tr>
            </table>
        </div>
    </wrapper>
    <script>
        let inputnumber = document.querySelectorAll(".inputnumber");

        for (let i = 0; i<inputnumber.length - 1; i++){
            inputnumber[i].addEventListener("keyup", function(){
                this.nextElementSibling.focus();
            })
        } //nextElementSibling 속성이 대체 무엇인지 모르겠지만.. 동작은 한다.
        /*
        nextSibling, nextElementSibling 모두 같은 노드 레벨의 다음 값을 가져옵니다. 

        둘의 차이는 
         
        nextSibling은 공백이든, 텍스트든 가리지 않고 다음에 있는 것을 가져오게 되고,
        nextElementSibling 은 Element(요소)만 가져오게 됩니다. 
        출처: https://aljjabaegi.tistory.com/548 [알짜배기 프로그래머:티스토리]

        다음 html 요소로 넘어가게 하는 메소드로 생각하면 될 듯

        네번째칸까지 숫자를 입력하면 투구칸으로 포커스를 주면 되겠다
        */

        var questNumber = []; //문제 배열 복사

        function questMaker(){
            let questNumber = new Array(); //문제 배열
            let zeroToNine = [0,1,2,3,4,5,6,7,8,9]; //1~10 배열
            while(questNumber.length < 4){
            let questNumbernum = zeroToNine.splice(Math.floor(Math.random() * zeroToNine.length),1)[0]
            questNumber.push(questNumbernum)
            }

            alert(questNumber + "문제 생성 완료");
            console.log(questNumber);
            a = questNumber;
            /*let으로 생성한 숫자 네 개를 어떻게 바깥으로 뺄 지 고민해야 한다. 임시방편으로 var를 썼다.
            문제가 생겼다. 한번 함수를 실행하면 더 이상 문제가 바뀌지 않는다
            그 다음 해결방법으로 바깥에 var a 변수를 놓고 함수 내부에서 a에 questNumber를 할당했다.
            */
        }

            
        
        var answerNumber = [];

        function pitch(){
            let box1 = document.getElementById("box1").value;
            let box2 = document.getElementById("box2").value;
            let box3 = document.getElementById("box3").value;
            let box4 = document.getElementById("box4").value;
            
            let boxarr = [box1, box2, box3, box4];

            const setCollection = new Set(boxarr);
            //Set 생성자 함수는 인수로 이터러블을 받습니다.
            //중복된 값을 Set 객체에 요소로 저장되지 않으므로 배열에서 중복된 요소를 제거하는데 사용합니다.
            const isDuplicate = setCollection.size < boxarr.length;
            //true 나오면 중복 있음. false 나오면 중복 없음.

            function validatie(){
                if (isDuplicate === true){
                    alert("중복된 숫자가 존재합니다");
                } else {
                    alert("문제없네요");
                }
            }
            answerNumber = boxarr;

            console.log(isDuplicate); 
            console.log(setCollection);
            validatie();
            /*
            1. 유효성 검사
            2. 스트라이크 볼 판정 후 표기
            3. 9회 초과 시 안내멘트와 함께 초기화
            */
            //버튼 클릭하면 비동기적으로 처리되면서 지워지는 것까지 구현하면 좋겠다(?맞는말일까)
        }

        /*이제 문제와 제출답안을 비교하는 로직을 짜야한다.
        1. 문제와 답안 비교 후 볼판정
        2. dom 조작하여 결과 출력
        3. 
        **포인트는 리스트에 어떻게 출력시킬지!
        */

        function isSameNumber(){
            if (a == answerNumber){
                alert("정답입니다.")
            } else {
                alert("오답입니다.")
            }
        }
        //a의 명칭을 구체화 하고 선언부터 다시 하자. 지금 상태로는 false가 나오니 자료형변경이 필요할듯.

    </script>
</body>
</html>